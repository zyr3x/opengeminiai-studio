[
    {
        "name": "list_files",
        "description": "Lists files and directories recursively from a starting path, returning an ASCII directory tree structure. This is the first step to understand the project layout before fetching file content. Use '.' to list the current project root. Results are filtered by standard ignore rules (e.g., .git, venv, build artifacts).",
        "parameters": {
            "type": "OBJECT",
            "properties": {
                "path": {
                    "type": "STRING",
                    "description": "The starting path relative to the current working directory. Use '.' for the project root."
                },
                "max_depth": {
                    "type": "INTEGER",
                    "description": "Optional. The maximum depth of directories to traverse. `max_depth=1` lists the current directory."
                }
            }
        }
    },
    {
        "name": "get_code_snippet",
        "description": "Extracts the source code of a specific function or class from a Python file. Use this after finding a symbol with analyze_file_structure.",
        "parameters": {
            "type": "OBJECT",
            "required": ["path", "symbol_name"],
            "properties": {
                "path": {
                    "type": "STRING",
                    "description": "The path to the file relative to the current working directory."
                },
                "symbol_name": {
                    "type": "STRING",
                    "description": "The name  of the function or class to extract."
                }
            }
        }
    },
    {
        "name": "get_file_content",
        "description": "Reads and returns the content of a single specified text file. Use this after identifying the file via list_files. Limited to 256 KB per file.",
        "parameters": {
            "type": "OBJECT",
            "required": ["path"],
            "properties": {
                "path": {
                    "type": "STRING",
                    "description": "The path to the file relative to the current working directory."
                }
            }
        }
    },
    {
        "name": "search_codebase",
        "description": "Performs a fast, line-based search for a string query across all files in the project, returning matching lines with their file paths and line numbers. Ideal for finding where functions are called or variables are defined.",
        "parameters": {
            "type": "OBJECT",
            "required": ["query"],
            "properties": {
                "query": {
                    "type": "STRING",
                    "description": "The string or regular expression to search for."
                }
            }
        }
    },
    {
        "name": "apply_patch",
        "description": "Applies a code patch (in unified diff format) to the codebase. Use this for making code changes.",
        "parameters": {
            "type": "object",
            "properties": {
                "patch_content": {
                    "type": "string",
                    "description": "The patch content in unified diff format (e.g., as generated by 'git diff')."
                }
            },
            "required": ["patch_content"]
        }
    },
    {
        "name": "git_status",
        "description": "Shows the working tree status including staged, unstaged, and untracked files. Essential for understanding current changes before committing.",
        "parameters": {
            "type": "OBJECT",
            "properties": {}
        }
    },
    {
        "name": "git_log",
        "description": "Shows commit history with messages and metadata. Optionally filter by file path to see commits affecting a specific file.",
        "parameters": {
            "type": "OBJECT",
            "properties": {
                "max_count": {
                    "type": "INTEGER",
                    "description": "Maximum number of commits to show (1-50, default 10)."
                },
                "path": {
                    "type": "STRING",
                    "description": "Optional file path to filter commits that modified this file."
                }
            }
        }
    },
    {
        "name": "git_diff",
        "description": "Shows changes in the working directory or staging area. Use staged=True to see what will be committed.",
        "parameters": {
            "type": "OBJECT",
            "properties": {
                "staged": {
                    "type": "BOOLEAN",
                    "description": "If true, shows staged changes (git diff --cached). If false or omitted, shows unstaged changes."
                },
                "path": {
                    "type": "STRING",
                    "description": "Optional file path to show diff only for this file."
                }
            }
        }
    },
    {
        "name": "git_show",
        "description": "Shows the content and metadata of a specific commit. Use this to inspect what changed in a commit.",
        "parameters": {
            "type": "OBJECT",
            "properties": {
                "commit": {
                    "type": "STRING",
                    "description": "Commit reference (hash, branch name, or 'HEAD'). Default is 'HEAD'."
                },
                "path": {
                    "type": "STRING",
                    "description": "Optional file path to show changes only for this file in the commit."
                }
            }
        }
    },
    {
        "name": "git_blame",
        "description": "Shows who last modified each line of a file and when. Useful for understanding code history and authorship.",
        "parameters": {
            "type": "OBJECT",
            "required": ["path"],
            "properties": {
                "path": {
                    "type": "STRING",
                    "description": "Path to the file to blame."
                },
                "start_line": {
                    "type": "INTEGER",
                    "description": "Optional starting line number for blame range."
                },
                "end_line": {
                    "type": "INTEGER",
                    "description": "Optional ending line number for blame range."
                }
            }
        }
    },
    {
        "name": "list_recent_changes",
        "description": "Lists files modified in the last N days based on git history. Useful for understanding recent development activity.",
        "parameters": {
            "type": "OBJECT",
            "properties": {
                "days": {
                    "type": "INTEGER",
                    "description": "Number of days to look back (1-90, default 7)."
                },
                "max_files": {
                    "type": "INTEGER",
                    "description": "Maximum number of files to return (1-100, default 20)."
                }
            }
        }
    },
    {
        "name": "analyze_file_structure",
        "description": "Analyzes a Python file's structure: imports, classes, functions, decorators, and docstrings.",
        "parameters": {
            "type": "OBJECT",
            "required": ["path"],
            "properties": {
                "path": {
                    "type": "STRING",
                    "description": "Path to the Python file to analyze."
                }
            }
        }
    },
    {
        "name": "get_file_stats",
        "description": "Returns comprehensive file statistics: size, lines of code, language, modification date, and git history.",
        "parameters": {
            "type": "OBJECT",
            "required": ["path"],
            "properties": {
                "path": {
                    "type": "STRING",
                    "description": "Path to the file to analyze."
                }
            }
        }
    },
    {
        "name": "create_file",
        "description": "Creates a new file with specified content. Perfect for creating scripts, config files, or any new files. Use write_file to modify existing files.",
        "parameters": {
            "type": "OBJECT",
            "required": ["path", "content"],
            "properties": {
                "path": {
                    "type": "STRING",
                    "description": "Path for the new file relative to project root."
                },
                "content": {
                    "type": "STRING",
                    "description": "Content to write to the file."
                },
                "mode": {
                    "type": "STRING",
                    "description": "Optional file permissions in octal format (default: '644', executable: '755')."
                }
            }
        }
    },
    {
        "name": "write_file",
        "description": "Writes content to an existing file, completely overwriting it. File must already exist (use create_file for new files).",
        "parameters": {
            "type": "OBJECT",
            "required": ["path", "content"],
            "properties": {
                "path": {
                    "type": "STRING",
                    "description": "Path to the existing file."
                },
                "content": {
                    "type": "STRING",
                    "description": "New content for the file."
                }
            }
        }
    },
    {
        "name": "execute_command",
        "description": "Executes a shell command and returns its output. Useful for running builds, tests, awk/sed scripts, or any shell commands. Commands run in project root directory.",
        "parameters": {
            "type": "OBJECT",
            "required": ["command"],
            "properties": {
                "command": {
                    "type": "STRING",
                    "description": "Shell command to execute (e.g., 'npm test', 'python script.py', 'awk ...')."
                },
                "timeout": {
                    "type": "INTEGER",
                    "description": "Maximum execution time in seconds (default: 30, max: 300)."
                }
            }
        }
    },
    {
        "name": "analyze_project_structure",
        "description": "Analyzes the entire project and returns a comprehensive overview: file types, programming languages, dependencies files found, total size, and structure. Great for understanding a new project quickly.",
        "parameters": {
            "type": "OBJECT",
            "properties": {}
        }
    },
    {
        "name": "find_symbol",
        "description": "Searches for a symbol (function, class, variable, constant) across the entire project. Returns all files and line numbers where the symbol is defined or used.",
        "parameters": {
            "type": "OBJECT",
            "required": ["symbol_name"],
            "properties": {
                "symbol_name": {
                    "type": "STRING",
                    "description": "Name of the symbol to find (e.g., 'myFunction', 'MyClass')."
                }
            }
        }
    },
    {
        "name": "get_dependencies",
        "description": "Detects and lists project dependencies from common dependency files (requirements.txt, package.json, go.mod, Cargo.toml, etc.). Shows all dependencies with versions.",
        "parameters": {
            "type": "OBJECT",
            "properties": {}
        }
    },
    {
        "name": "read_file_lines",
        "description": "Reads specific lines from a file (inclusive range). More efficient than reading entire large files when you only need a section. Lines are shown with numbers.",
        "parameters": {
            "type": "OBJECT",
            "required": ["path"],
            "properties": {
                "path": {
                    "type": "STRING",
                    "description": "Path to the file."
                },
                "start_line": {
                    "type": "INTEGER",
                    "description": "Starting line number (1-based, default: 1)."
                },
                "end_line": {
                    "type": "INTEGER",
                    "description": "Ending line number (inclusive, default: end of file)."
                }
            }
        }
    },
    {
        "name": "find_references",
        "description": "Finds all references to a symbol (function, class, variable) across the codebase. Shows every file and line where the symbol appears. More comprehensive than find_symbol.",
        "parameters": {
            "type": "OBJECT",
            "required": ["symbol"],
            "properties": {
                "symbol": {
                    "type": "STRING",
                    "description": "Symbol name to search for (e.g., 'myFunction', 'MyClass', 'CONSTANT')."
                },
                "file_types": {
                    "type": "STRING",
                    "description": "Optional comma-separated file extensions to search (e.g., '.py,.js'). If omitted, searches all code files."
                }
            }
        }
    },
    {
        "name": "run_tests",
        "description": "Automatically detects and runs tests using common frameworks (pytest, jest, go test, cargo test, npm test). Returns test results with pass/fail status.",
        "parameters": {
            "type": "OBJECT",
            "properties": {
                "test_path": {
                    "type": "STRING",
                    "description": "Optional specific test file or directory to run (e.g., 'tests/test_auth.py')."
                },
                "pattern": {
                    "type": "STRING",
                    "description": "Optional test name pattern to filter tests (e.g., 'test_login*')."
                },
                "verbose": {
                    "type": "BOOLEAN",
                    "description": "If true, shows verbose test output with details for each test."
                }
            }
        }
    },
    {
        "name": "compare_files",
        "description": "Compares two files and shows differences in unified diff format. Useful for understanding changes between versions or similar files.",
        "parameters": {
            "type": "OBJECT",
            "required": ["path1", "path2"],
            "properties": {
                "path1": {
                    "type": "STRING",
                    "description": "Path to first file."
                },
                "path2": {
                    "type": "STRING",
                    "description": "Path to second file."
                }
            }
        }
    },
    {
        "name": "get_file_outline",
        "description": "Generates a structured outline/table of contents for a file showing all top-level definitions (functions, classes, methods) with line numbers. Python files show full AST analysis.",
        "parameters": {
            "type": "OBJECT",
            "required": ["path"],
            "properties": {
                "path": {
                    "type": "STRING",
                    "description": "Path to the file to outline."
                }
            }
        }
    }
]
