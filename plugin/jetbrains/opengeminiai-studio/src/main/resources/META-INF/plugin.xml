<idea-plugin>
    <id>com.opengeminiai.studio.v1</id>
    <name>OpenGeminiAI Studio</name>
    <vendor>zyr3x</vendor>
    <description><![CDATA[<p><b>Professional AI Assistant for JetBrains IDEs.</b></p>
        <p>OpenGeminiAI Studio integrates powerful LLMs (Gemini, OpenRouter) directly into your workflow via a high-performance local proxy.</p>

        <h3>âœ¨ Key Features:</h3>
        <ul>
            <li><b>Advanced Chat:</b> Professional chat interface with persistent history and Markdown support.</li>
            <li><b>Quick Edit:</b> Allow the AI to suggest and apply code modifications directly to your files with a built-in diff viewer.</li>
            <li><b>AI Commit Messages:</b> Generate concise, conventional commit messages based on your staged changes with one click.</li>
            <li><b>Context Aware:</b> Seamlessly attach local files and images to your prompts via drag-and-drop.</li>
            <li><b>Multi-Provider:</b> Support for Gemini and OpenRouter models (Claude 3.7, GPT-4o, DeepSeek) through a unified interface.</li>
        </ul>

        <h3>ðŸš€ Getting Started:</h3>
        <ol>
            <li>Ensure your OpenGeminiAI Studio proxy is running (default: http://localhost:8080).</li>
            <li>Go to <b>Settings > Tools > OpenGeminiAI Studio</b> to configure your Base URL.</li>
            <li>Open the tool window on the right sidebar and start coding with AI!</li>
        </ol>
    ]]></description>
    <change-notes><![CDATA[<ul>
    <li><b>v1.2.0</b>: Web Tab & UX Improvements
        <ul>
            <li><b>Gemini Web Tab:</b> Added a new dedicated tab to access the Gemini Web interface directly within the tool window.</li>
            <li><b>Smart Streaming:</b> Enhanced code block parsing logic to gracefully handle unclosed blocks during real-time streaming.</li>
            <li><b>Cleaner UI:</b> Internal JSON change proposals are now hidden during generation, replaced by a clear "Generating changes..." status indicator.</li>
        </ul>
    </li>
    <li><b>v1.1.0</b>: UI & Context Update
        <ul>
            <li><b>Enhanced UI:</b> Redesigned context attachments (chips), improved Dark Mode contrast, and clearer Markdown rendering.</li>
            <li><b>Context Filters:</b> New settings to ignore specific folders/extensions (e.g. node_modules) when attaching Project Structure.</li>
            <li><b>Slash Commands:</b> Added <code>/explain</code>, <code>/fix</code>, <code>/refactor</code>, <code>/test</code>, and <code>/doc</code> shortcuts.</li>
            <li><b>Chat Management:</b> Added ability to rename conversations and real-time token usage estimation.</li>
            <li><b>Fixes:</b> Improved model selection popup and attachment handling.</li>
        </ul>
    </li>
    <li><b>v1.0.0</b>: Initial Release.
        <ul>
            <li>Native Chat interface with Markdown and History.</li>
            <li>Quick Edit mode for direct code patching.</li>
            <li>Conventional Commit Message generator.</li>
            <li>File and Image attachment support.</li>
            <li>Custom System Prompt profiles.</li>
        </ul>
    </li>
</ul>]]></change-notes>
    <depends>com.intellij.modules.platform</depends>

    <extensions defaultExtensionNs="com.intellij">
        <toolWindow id="OpenGeminiAI Studio" secondary="false" anchor="right"
                    icon="/icons/logo-dark.svg"
                    factoryClass="com.opengeminiai.studio.client.GeminiToolWindowFactory"/>

        <projectService serviceImplementation="com.opengeminiai.studio.client.service.ChatInterfaceService"/>
    </extensions>

    <actions>
        <action id="com.opengeminiai.studio.client.actions.GenerateCommitAction"
                class="com.opengeminiai.studio.client.actions.GenerateCommitAction"
                text="Generate Commit Message (OpenGeminiAI Studio)"
                description="Generates a commit message using OpenGeminiAI"
                icon="/icons/logo-dark.svg">
            <add-to-group group-id="Vcs.MessageActionGroup" anchor="first"/>
        </action>
        <group id="OpenGeminiAI.EditorContext"
               text="OpenGeminiAI Studio"
               popup="true"
        >
            <add-to-group group-id="EditorPopupMenu" anchor="last"/>
            <add-to-group group-id="ConsoleEditorPopupMenu" anchor="last"/>

            <action id="OpenGeminiAI.Explain" class="com.opengeminiai.studio.client.actions.ExplainCodeAction" text="Explain Code"/>
            <action id="OpenGeminiAI.Refactor" class="com.opengeminiai.studio.client.actions.RefactorCodeAction" text="Refactor / Optimize"/>
            <action id="OpenGeminiAI.Tests" class="com.opengeminiai.studio.client.actions.GenerateTestsAction" text="Generate Tests"/>
            <action id="OpenGeminiAI.Bugs" class="com.opengeminiai.studio.client.actions.FindBugsAction" text="Find Bugs"/>
            <separator/>
            <action id="OpenGeminiAI.AnalyzeError" class="com.opengeminiai.studio.client.actions.AnalyzeErrorAction" text="Analyze Error / Log"/>
        </group>
    </actions>
</idea-plugin>