version: '3.8'

services:
  gemini-proxy:
    build: .
    ports:
      - "${SERVER_PORT:-8080}:${SERVER_PORT:-8080}"
    env_file:
      - .env
    environment:
      # Set ASYNC_MODE=true to enable async mode (recommended for production)
      # Set ASYNC_MODE=false or omit for sync mode (default)
      - ASYNC_MODE=${ASYNC_MODE:-false}
    restart: unless-stopped
    volumes:
       - ${PROJECTS_PATH}:${PROJECTS_PATH}
       - ./:/app/
       - ${DOCKER_SOCK_PATH:-/var/run/docker.sock}:/var/run/docker.sock
